<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XGBoost Prediction</title>
</head>
<body>

  <h1>XGBoost Prediction</h1>
  <div id="predictionResult"></div>

  <script>
    // Function to make predictions
    function predict(tree, input) {
      if (tree.leftChild && tree.rightChild) {
        const featureIndex = tree.featureIndex;
        const threshold = tree.threshold;

        if (input[featureIndex] <= threshold) {
          return predict(tree.leftChild, input);
        } else {
          return predict(tree.rightChild, input);
        }
      } else {
        return tree.prediction;
      }
    }

    // Function to load the XGBoost model and make predictions
    function loadModelAndPredict() {
      // Example of using fetch to get the JSON from the URL
      fetch('https://bpmodel.ly.gd.edu.kg/model/bp.xg.json')
        .then(response => response.json())
        .then(xgboostModel => {
          // Test data
          const inputData = [18,82,0,0,0,3405.4,1,14.73,9.7,0.308,4605,138.4,0,462,2363,313,2,5.074,1.033,3657,1.821,872,139,0.524,2.3,49.873,89.82,0.7,0.011,10.02,431,125,8,869,7.1];

          // Make a prediction using the first tree
          const prediction = predict(xgboostModel.trees[0], inputData);

          // Output the result on the webpage
          document.getElementById('predictionResult').innerText = 'Model Prediction: ' + prediction;
        })
        .catch(error => console.error('Error loading JSON:', error));
    }

    // Call the function when the page loads
    window.onload = loadModelAndPredict;
  </script>

</body>
</html>
