<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Pressure Prediction Demo</title>
</head>
<body>
    <h2>Logistic Regression Result</h2>

    <form id="regressionForm">
        <!-- Placeholder input fields for the 43 predictor variables -->
        <label for="BPACSZ2">BPACSZ2: </label>
        <input type="number" id="BPACSZ2" name="BPACSZ2" required step="any"><br>

        <label for="BPACSZ3">BPACSZ3: </label>
        <input type="number" id="BPACSZ3" name="BPACSZ3" required step="any"><br>
        
        <label for="HIQ0119">HIQ0119: </label>
        <input type="number" id="HIQ0119" name="HIQ0119" required step="any"><br>

        <button type="button" onclick="getResult()">Calculate Probabilities</button>
    </form>

    <p>Probability of Normal Blood Pressure: <span id="probClass0"></span>%</p>
    <p>Probability of Elevated Blood Pressure: <span id="probClass1"></span>%</p>
    <p>Probability of High Blood Pressure: <span id="probClass2"></span>%</p>
  
    <script>
      const inputs = { 
        BPACSZ2: parseFloat(document.getElementById('BPACSZ2').value),
        BPACSZ3: parseFloat(document.getElementById('BPACSZ3').value),
        BPACSZ5: 0,
        BPXPLS: 82,
        BPXPTY2: 0,
        RIAGENDR2: 0,
        RIDAGEYR: 18,
        RIDRETH32: 0,
        RIDRETH33: 0,
        RIDRETH34: 0,
        RIDRETH36: 1,
        DMDHHSZA: 0,
        DMDHHSZB: 0,
        DMDHHSZE: 1,
        DR1TNUMF: 8,
        DR1TSUGR: 14.73,
        DR1TCHOL: 462,
        DR1TATOC: 10.02, 
        DR1TACAR: 872,
        DR1TLYCO: 4605,
        DR1TNIAC: 26.831,
        DR1TVB6: 1.821,
        DR1TVB12: 2.3,
        DR1TVC: 9.7,
        DR1TVD: 0.7,
        DR1TZINC: 8.05,
        DR1TPOTA: 1247,
        DR1TALCO: 0,
        DR1TMOIS: 3405.4,
        DR1TS060: 0.203,
        DR1TS080: 0.14,
        DR1TS120: 0.459,
        DR1TS180: 7.747,
        DR1TM161: 3.387,
        DR1TM201: 0.524,
        DR1TM221: 0.011,
        DR1TP184: 0.016,
        DR1TP204: 0.308,
        DIQ0102: 1,
        DIQ0502: 1,
        HIQ0112: 0,
        HIQ0117: 0,
        HIQ0119: parseFloat(document.getElementById('HIQ0119').value)
      };
      const coefficients1 = [2.252185, 0.786583, 0.1767172, -0.4005157, -0.003222733, 0.126409, 0.2307534, -0.0368332, 0.02412699, 0.16938, -0.1006645, -0.03423066, 0.04037024, 0.03489702, 0.0189516, 0.006475536, -0.00002115487, -0.00002762892, 0.00002254953, -0.000003835953, 2.494568e-7, -0.00008222347, -0.003037771, -0.001861971, -0.000005225791, 0.007484265, -0.0004468544, 0.00002335308, -0.001490529, -0.00004382329, 0.1333655, 0.02519279, -0.001063861, -0.002763147, -0.01737351, -0.03517973, -0.0781895, -0.3719599, -0.3937469, 0.005935987, -0.09781378, -0.02504484, 0.5921226, -0.03768082];
      const coefficients2 = [-0.6889857, -0.4102865, -0.1796646, 0.1731479, -0.000003475394, 0.03950475, -0.12491, 0.003922524, -0.005492664, -0.05195173, -0.0656122, -0.03245764, -0.01856431, -0.02271656, 0.05940028, 0.001557755, -0.0001419255, 0.000005153439, 0.00002520245, -1.821549e-9, -1.08814e-7, -0.00004030846, -0.00473784, 0.001234899, 0.00001345373, -0.002611872, 0.0008037442, -0.000004281285, 0.001563246, 0.00001167003, -0.04047573, -0.1485159, -0.002392922, -0.000263683, 0.005600422, 0.0157894, 0.04351185, -0.1414094, 0.2857126, -0.04900016, 0.02817611, -0.01306966, -0.3291087, 0.01263949];
      const coefficients3 = [-1.563199, -0.3762966, 0.002947453, 0.2273678, 0.003226208, -0.1659138, -0.1058434, 0.03291068, -0.01863433, -0.1174283, 0.1662767, 0.06668831, -0.02180593, -0.01218046, -0.07835188, -0.00803329, 0.0001630804, 0.00002247548, -0.00004775198, 0.000003837775, -1.406428e-7, 0.0001225319, 0.007775611, 0.0006270719, -0.000008227939, -0.004872393, -0.0003568898, -0.00001907179, -0.00007271764, 0.00003215326, -0.09288976, 0.1233232, 0.003456783, 0.00302683, 0.01177308, 0.01939033, 0.03467764, 0.5133693, 0.1080342, 0.04306417, 0.06963766, 0.0381145, -0.263014, 0.02504133];
      function calculateProb(coefficients, inputs) {
        const expSum = Math.exp(coefficients[0] + 
            coefficients[1] * inputs.BPACSZ2 +
            coefficients[2] * inputs.BPACSZ3 + 
            coefficients[3] * inputs.BPACSZ5 +
            coefficients[4] * inputs.BPXPLS + 
            coefficients[5] * inputs.BPXPTY2 +
            coefficients[6] * inputs.RIAGENDR2 +
            coefficients[7] * inputs.RIDAGEYR +
            coefficients[8] * inputs.RIDRETH32 +
            coefficients[9] * inputs.RIDRETH33 +
            coefficients[10] * inputs.RIDRETH34 +
            coefficients[11] * inputs.RIDRETH36 +
            coefficients[12] * inputs.DMDHHSZA +
            coefficients[13] * inputs.DMDHHSZB +
            coefficients[14] * inputs.DMDHHSZE +
            coefficients[15] * inputs.DR1TNUMF +
            coefficients[16] * inputs.DR1TSUGR +
            coefficients[17] * inputs.DR1TCHOL +
            coefficients[18] * inputs.DR1TATOC +
            coefficients[19] * inputs.DR1TACAR +
            coefficients[20] * inputs.DR1TLYCO +
            coefficients[21] * inputs.DR1TNIAC +
            coefficients[22] * inputs.DR1TVB6 +
            coefficients[23] * inputs.DR1TVB12 +
            coefficients[24] * inputs.DR1TVC +
            coefficients[25] * inputs.DR1TVD +
            coefficients[26] * inputs.DR1TZINC +
            coefficients[27] * inputs.DR1TPOTA +
            coefficients[28] * inputs.DR1TALCO +
            coefficients[29] * inputs.DR1TMOIS +
            coefficients[30] * inputs.DR1TS060 +
            coefficients[31] * inputs.DR1TS080 +
            coefficients[32] * inputs.DR1TS120 +
            coefficients[33] * inputs.DR1TS180 +
            coefficients[34] * inputs.DR1TM161 +
            coefficients[35] * inputs.DR1TM201 +
            coefficients[36] * inputs.DR1TM221 +
            coefficients[37] * inputs.DR1TP184 +
            coefficients[38] * inputs.DR1TP204 +
            coefficients[39] * inputs.DIQ0102 +
            coefficients[40] * inputs.DIQ0502 +
            coefficients[41] * inputs.HIQ0112 +
            coefficients[42] * inputs.HIQ0117 +
            coefficients[43] * inputs.HIQ0119);
        return expSum;
      }
      function getResult() {
          const expSum1 = calculateProb(coefficients1, inputs);
          const expSum2 = calculateProb(coefficients2, inputs);
          const expSum3 = calculateProb(coefficients3, inputs);
        
          const probClass0 = expSum1 / (expSum1 + expSum2 + expSum3) * 100;
          const probClass1 = expSum2 / (expSum1 + expSum2 + expSum3) * 100;
          const probClass2 = expSum3 / (expSum1 + expSum2 + expSum3) * 100;
        
          document.getElementById('probClass0').innerText = probClass0.toFixed(4);
          document.getElementById('probClass1').innerText = probClass1.toFixed(4);
          document.getElementById('probClass2').innerText = probClass2.toFixed(4);
      }
    </script>
</body>
</html>
